version: "3"

vars:
  NAME: "main"
  BIN_NAME: "{{.NAME}}.exe"

tasks:
  dev:
    desc: Run app in development mode with reload
    watch: true
    sources:
      - "**/*.go"
      - exclude: "**/*.templ"
    deps:
      - kill
    cmds:
      - go build -o ./tmp/{{.BIN_NAME}} main.go
      - ./tmp/{{.BIN_NAME}}
    status: ["false"]

  kill:
    cmds:
      - killall -q {{.BIN_NAME}} || echo "Process was not running."